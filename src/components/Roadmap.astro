---
// src/components/Roadmap.astro
// Componente de testimonios de clientes con diseño glassmorphism
---

<section id="testimonios" class="min-h-screen py-20 px-4 relative overflow-hidden">
  <!-- Elementos decorativos de fondo -->
  <div class="roadmap-background absolute inset-0 pointer-events-none">
    <!-- Líneas de conexión sutiles -->
    <div class="absolute top-1/2 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#00F2FF] to-transparent opacity-20"></div>
    <div class="absolute top-0 left-1/2 w-px h-full bg-gradient-to-b from-transparent via-[#FF00E5] to-transparent opacity-15"></div>
    
    <!-- Elementos de luz ambientales -->
    <div class="ambient-glow-1 absolute top-32 left-20 w-24 h-24 bg-[#00F2FF] opacity-8 rounded-full blur-2xl animate-pulse"></div>
    <div class="ambient-glow-2 absolute bottom-32 right-32 w-32 h-32 bg-[#FF00E5] opacity-6 rounded-full blur-3xl animate-pulse" style="animation-delay: 3s;"></div>
  </div>

  <div class="w-full px-8 mx-auto relative z-10">
    <!-- Título principal de la sección -->
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-[#F5F5F5] mb-16"
          style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 20px rgba(0, 242, 255, 0.5);">
        NUESTROS <span class="text-[#00F2FF]" style="text-shadow: 0 0 20px rgba(0, 242, 255, 0.6);">TESTIMONIOS</span>
      </h2>
    </div>

    <!-- Contenedor de testimonios -->
    <div class="testimonials-container relative w-full mx-auto">
      <!-- Contenedor principal con flexbox para layout horizontal -->
      <div class="testimonials-flow flex flex-col lg:flex-row items-stretch justify-center gap-8 lg:gap-12 xl:gap-16">
        
        <!-- Testimonio 1 -->
        <div class="testimonial-card testimonial-1 relative flex-shrink-0 flex-1">
          <!-- Tarjeta principal -->
          <div class="testimonial-content bg-[#0D0B1A]/80 backdrop-blur-md border border-white/10 p-8 rounded-2xl transition-all duration-300 hover:border-[#00F2FF]/50 hover:shadow-[0_0_30px_rgba(0,242,255,0.3)] hover:scale-105 w-full">
            <!-- Testimonial text -->
            <p class="testimonial-text text-base md:text-lg lg:text-xl font-bold mb-8 text-[#00F2FF] leading-tight text-center"
               style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 10px rgba(0, 242, 255, 0.3);">
              "Excelente servicio. Eficiente y muy dispuestos. Muy rápidos al responder cada una de mis dudas o consultas. El trabajo lo realizaron con mucha puntualidad y con buena calidad."
            </p>

            <!-- Author info -->
            <div class="author-info flex items-center gap-4">
              <!-- Company logo -->
              <div class="author-image w-24 h-16 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg flex items-center justify-center flex-shrink-0 p-2">
                <img src="/images/pokelanlogo.webp" alt="Pokelan Logo" class="w-full h-full object-contain" />
              </div>
              <!-- Author name and company -->
              <div class="author-details">
                <h4 class="author-name text-[#F5F5F5] font-semibold text-lg" style="font-family: 'Inter', sans-serif;">
                  Isabella F.
                </h4>
                <p class="author-company text-[#F5F5F5]/70 text-sm" style="font-family: 'Inter', sans-serif;">
                  Directora de Marketing, Pokelan
                </p>
              </div>
            </div>
          </div>
        </div>


        <!-- Testimonio 2 -->
        <div class="testimonial-card testimonial-2 relative flex-shrink-0 flex-1">
          <!-- Tarjeta principal -->
          <div class="testimonial-content bg-[#0D0B1A]/80 backdrop-blur-md border border-white/10 p-8 rounded-2xl transition-all duration-300 hover:border-[#FF00E5]/50 hover:shadow-[0_0_30px_rgba(255,0,229,0.3)] hover:scale-105 w-full">
            <!-- Testimonial text -->
            <p class="testimonial-text text-base md:text-lg lg:text-xl font-bold mb-8 text-[#FF00E5] leading-tight text-center"
               style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 10px rgba(255, 0, 229, 0.3);">
              "Estoy muy conforme con el trabajo. Fueron muy profesionales en todo momento y el producto cumple 100% con lo solicitado. Los recomiendo absolutamente."
            </p>

            <!-- Author info -->
            <div class="author-info flex items-center gap-4">
              <!-- Company logo -->
              <div class="author-image w-16 h-16 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg flex items-center justify-center flex-shrink-0 p-2">
                <img src="/images/LOGO-E-ISOTIPO-06.png" alt="LEDpoint Logo" class="w-full h-full object-contain" />
              </div>
              <!-- Author name and company -->
              <div class="author-details">
                <h4 class="author-name text-[#F5F5F5] font-semibold text-lg" style="font-family: 'Inter', sans-serif;">
                  Paulo Aranguren
                </h4>
                <p class="author-company text-[#F5F5F5]/70 text-sm" style="font-family: 'Inter', sans-serif;">
                  CEO, LEDpoint
                </p>
              </div>
            </div>
          </div>
        </div>


        <!-- Testimonio 3 -->
        <div class="testimonial-card testimonial-3 relative flex-shrink-0 flex-1">
          <!-- Tarjeta principal -->
          <div class="testimonial-content bg-[#0D0B1A]/80 backdrop-blur-md border border-white/10 p-8 rounded-2xl transition-all duration-300 hover:border-[#00F2FF]/50 hover:shadow-[0_0_30px_rgba(0,242,255,0.3)] hover:scale-105 w-full">
            <!-- Testimonial text -->
            <p class="testimonial-text text-base md:text-lg lg:text-xl font-bold mb-8 text-[#00F2FF] leading-tight text-center"
               style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 10px rgba(0, 242, 255, 0.3);">
              "Son excelentes profesionales, van mas alla de lo solicitado generando valor agregado para los proyectos, fue un gusto trabajar con ellos y el resultado fue muy bueno."
            </p>

            <!-- Author info -->
            <div class="author-info flex items-center gap-4">
              <!-- Company logo -->
              <div class="author-image w-24 h-16 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg flex items-center justify-center flex-shrink-0 p-2">
                <img src="/images/terramarte-logo.png" alt="Terramarte Logo" class="w-full h-full object-contain" />
              </div>
              <!-- Author name and company -->
              <div class="author-details">
                <h4 class="author-name text-[#F5F5F5] font-semibold text-lg" style="font-family: 'Inter', sans-serif;">
                  Alejandro Gómez
                </h4>
                <p class="author-company text-[#F5F5F5]/70 text-sm" style="font-family: 'Inter', sans-serif;">
                  Líder de Mercadeo, Terramarte
                </p>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<style>
  /* Layout principal con flexbox */
  .testimonials-flow {
    align-items: stretch; /* Asegura que todos los elementos tengan la misma altura */
  }

  .testimonial-card {
    position: relative;
    min-height: 350px; /* Altura mínima consistente para testimonios */
  }

  /* Tarjetas con altura fija y efectos mejorados */
  .testimonial-content {
    height: 100%;
    min-height: 350px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: relative;
    overflow: hidden;
  }

  /* Borde de gradiente mejorado para testimonios */
  .testimonial-content::before {
    content: '';
    position: absolute;
    inset: 0;
    padding: 2px;
    background: linear-gradient(135deg, transparent, transparent);
    border-radius: inherit;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: xor;
    -webkit-mask-composite: xor;
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
  }

  /* Gradiente para todas las tarjetas de testimonio */
  .testimonial-card .testimonial-content:hover::before {
    background: linear-gradient(135deg, #FF00E5 0%, #00F2FF 50%, #9D4EDD 100%);
    opacity: 1;
  }

  /* Efectos para las imágenes de autor */
  .author-image {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .testimonial-card:hover .author-image {
    transform: scale(1.05);
    border-color: rgba(255, 0, 229, 0.5);
  }

  /* Animaciones para el texto del testimonio */
  .testimonial-text {
    transition: all 0.3s ease;
  }

  .testimonial-card:hover .testimonial-text {
    transform: translateY(-2px);
    text-shadow: 0 0 15px rgba(255, 0, 229, 0.4);
  }

  /* Animaciones de entrada para testimonios */
  .testimonial-card {
    opacity: 1;
    transform: translateY(0);
  }

  /* Responsive improvements */
  @media (max-width: 768px) {
    .testimonials-flow {
      gap: 2rem;
    }

    .testimonial-content {
      min-height: 300px;
      padding: 2rem 1.5rem !important;
    }

    .testimonial-text {
      font-size: 1rem !important;
      line-height: 1.3;
      margin-bottom: 2rem !important;
    }

    .testimonial-1 .author-image,
    .testimonial-3 .author-image {
      width: 4rem !important;
      height: 3rem !important;
    }

    .testimonial-2 .author-image {
      width: 3rem !important;
      height: 3rem !important;
    }

    .author-name {
      font-size: 1rem !important;
    }

    .author-company {
      font-size: 0.75rem !important;
    }
  }

  @media (min-width: 1024px) {
    .testimonials-flow {
      padding: 0 2rem;
    }

    .testimonial-card {
      max-width: none;
    }

    .testimonial-content {
      min-height: 380px;
    }
  }

  /* Animaciones de fondo optimizadas */
  .ambient-glow-1 {
    animation: glowFloat1 8s ease-in-out infinite;
  }

  .ambient-glow-2 {
    animation: glowFloat2 10s ease-in-out infinite;
  }

  @keyframes glowFloat1 {
    0%, 100% {
      transform: translateY(0px) scale(1);
      opacity: 0.08;
    }
    50% {
      transform: translateY(-15px) scale(1.05);
      opacity: 0.12;
    }
  }

  @keyframes glowFloat2 {
    0%, 100% {
      transform: translateY(0px) scale(1);
      opacity: 0.06;
    }
    50% {
      transform: translateY(12px) scale(0.95);
      opacity: 0.1;
    }
  }

  /* Mejoras para el contenedor principal */
  .testimonials-container {
    padding: 2rem 0;
  }

  /* Efectos de hover mejorados */
  .testimonial-content:hover {
    transform: translateY(-5px);
  }

  .testimonial-content {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>

<script>
  console.log('🔧 Testimonials.astro script cargado');

  // Verificar que la sección existe
  const testimonialsSection = document.getElementById('testimonios');
  console.log('📍 Sección testimonios encontrada:', testimonialsSection);

  // Verificar las tarjetas de testimonio
  const testimonialCards = document.querySelectorAll('.testimonial-card');
  console.log('📋 Testimonios encontrados:', testimonialCards.length);

  testimonialCards.forEach((card, index) => {
    console.log(`📋 Testimonio ${index + 1}:`, card);
  });

  console.log('✅ Configuración de Testimonials completada');

  // Animaciones GSAP con ScrollTrigger
  document.addEventListener('DOMContentLoaded', function() {
    // Verificar que GSAP esté disponible
    if (typeof gsap !== 'undefined' && gsap.registerPlugin) {
      gsap.registerPlugin(ScrollTrigger);
      console.log('🎬 GSAP y ScrollTrigger inicializados para Testimonials');

      // Animación de entrada del título
      gsap.fromTo("#testimonios h2", {
        opacity: 0,
        y: 50
      }, {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: "power2.out",
        scrollTrigger: {
          trigger: "#testimonios",
          start: "top 80%",
          toggleActions: "play none none reverse"
        }
      });

      // Animación de entrada de los testimonios con stagger
      gsap.fromTo(".testimonial-card", {
        opacity: 0,
        y: 80,
        scale: 0.9
      }, {
        opacity: 1,
        y: 0,
        scale: 1,
        duration: 0.8,
        stagger: 0.2,
        ease: "power2.out",
        scrollTrigger: {
          trigger: "#testimonios",
          start: "top 70%",
          toggleActions: "play none none reverse"
        }
      });


      // Animación de los elementos de fondo
      gsap.to(".ambient-glow-1", {
        scale: 1.3,
        opacity: 0.12,
        duration: 4,
        yoyo: true,
        repeat: -1,
        ease: "power1.inOut"
      });

      gsap.to(".ambient-glow-2", {
        scale: 0.7,
        opacity: 0.1,
        duration: 5,
        yoyo: true,
        repeat: -1,
        ease: "power1.inOut",
        delay: 2
      });

      console.log('✨ Animaciones GSAP de Testimonials configuradas');
    } else {
      console.warn('⚠️ GSAP no está disponible para Testimonials');
    }
  });
</script>