---
// src/components/Portfolio.astro
// Componente de Portfolio en formato carousel con diseño flotante de dos columnas
---

<section id="portfolio" class="min-h-screen py-20 px-4 relative overflow-hidden">
  <!-- Elementos decorativos de fondo -->
  <div class="portfolio-background absolute inset-0 pointer-events-none">
    <!-- Outrun Grid Pattern -->
    <div class="grid-outrun-container absolute inset-0 overflow-hidden">
      <div class="grid-outrun absolute inset-0"></div>
    </div>
    
    <!-- Elementos de luz ambientales -->
    <div class="ambient-light-1 absolute top-20 left-10 w-40 h-40 bg-[#00F2FF] opacity-5 rounded-full blur-3xl animate-pulse"></div>
    <div class="ambient-light-2 absolute bottom-20 right-20 w-32 h-32 bg-[#FF00E5] opacity-8 rounded-full blur-2xl animate-pulse" style="animation-delay: 2s;"></div>
  </div>

  <div class="max-w-7xl mx-auto relative z-10">
    <!-- Carousel Container -->
    <div class="portfolio-carousel relative h-[600px] flex items-center">
      
      <!-- Navigation Arrows - Outside content area -->
      <button class="carousel-nav carousel-prev absolute -left-20 top-1/2 transform -translate-y-1/2 z-20 p-4 text-[#00F2FF] hover:text-[#FF00E5] transition-all duration-300 hover:scale-110">
        <svg class="w-8 h-8 md:w-12 md:h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>
      
      <button class="carousel-nav carousel-next absolute -right-20 top-1/2 transform -translate-y-1/2 z-20 p-4 text-[#00F2FF] hover:text-[#FF00E5] transition-all duration-300 hover:scale-110">
        <svg class="w-8 h-8 md:w-12 md:h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </button>

      <!-- Slides Container -->
      <div class="carousel-slides w-full">
        
        <!-- Slide 1: Neon Arcade -->
        <div class="carousel-slide active flex flex-col md:flex-row items-center gap-8 md:gap-12">
          <!-- Left Column - 35% -->
          <div class="slide-content flex-shrink-0 w-full md:w-[35%]">
            <div class="project-info">
              <h2 class="project-title text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-[#00F2FF]" 
                  style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 20px rgba(0, 242, 255, 0.6);">
                PROYECTO:<br>
                <span class="text-[#FF00E5]" style="text-shadow: 0 0 20px rgba(255, 0, 229, 0.6);">NEON ARCADE</span>
              </h2>
              <p class="project-description text-[#F5F5F5] leading-relaxed mb-6 max-w-md" 
                 style="font-family: 'Inter', sans-serif;">
                E-commerce de videojuegos retro - Incremento de conversión +40%
              </p>
              <button class="view-project-btn group relative inline-flex items-center justify-center px-8 py-4 font-vcr font-bold text-sm md:text-base bg-gradient-to-r from-[#FF00E5] to-[#9D4EDD] text-white rounded-lg transition-all duration-300 hover:shadow-[0_0_30px_rgba(255,0,229,0.6)] transform hover:scale-105">
                <span class="relative z-10">VER PROYECTO</span>
                <div class="absolute inset-0 bg-gradient-to-r from-[#9D4EDD] to-[#FF00E5] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
            </div>
          </div>
          
          <!-- Right Column - 65% -->
          <div class="slide-image flex-1 w-full md:w-[65%]">
            <div class="image-container relative overflow-hidden">
              <img src="/images/cromo.webp" 
                   alt="Neon Arcade Project" 
                   class="project-image w-full h-auto aspect-video object-cover">
              <!-- VHS Scanlines Effect -->
              <div class="vhs-scanlines absolute inset-0 pointer-events-none"></div>
            </div>
          </div>
        </div>

        <!-- Slide 2: Cromo Audiovisual -->
        <div class="carousel-slide flex flex-col md:flex-row items-center gap-8 md:gap-12">
          <div class="slide-content flex-shrink-0 w-full md:w-[35%]">
            <div class="project-info">
              <h2 class="project-title text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-[#00F2FF]" 
                  style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 20px rgba(0, 242, 255, 0.6);">
                PROYECTO:<br>
                <span class="text-[#FF00E5]" style="text-shadow: 0 0 20px rgba(255, 0, 229, 0.6);">CROMO AUDIOVISUAL</span>
              </h2>
              <p class="project-description text-[#F5F5F5] leading-relaxed mb-6 max-w-md" 
                 style="font-family: 'Inter', sans-serif;">
                Landing page creativa para estudio audiovisual con experiencia inmersiva y alta conversión
              </p>
              <button class="view-project-btn group relative inline-flex items-center justify-center px-8 py-4 font-vcr font-bold text-sm md:text-base bg-gradient-to-r from-[#FF00E5] to-[#9D4EDD] text-white rounded-lg transition-all duration-300 hover:shadow-[0_0_30px_rgba(255,0,229,0.6)] transform hover:scale-105">
                <span class="relative z-10">VER PROYECTO</span>
                <div class="absolute inset-0 bg-gradient-to-r from-[#9D4EDD] to-[#FF00E5] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
            </div>
          </div>
          
          <div class="slide-image flex-1 w-full md:w-[65%]">
            <div class="image-container relative overflow-hidden">
              <img src="/images/cromo.webp" 
                   alt="Cromo Audiovisual Project" 
                   class="project-image w-full h-auto aspect-video object-cover">
              <div class="vhs-scanlines absolute inset-0 pointer-events-none"></div>
            </div>
          </div>
        </div>

        <!-- Slide 3: Perros y Gatos FOOD -->
        <div class="carousel-slide flex flex-col md:flex-row items-center gap-8 md:gap-12">
          <div class="slide-content flex-shrink-0 w-full md:w-[35%]">
            <div class="project-info">
              <h2 class="project-title text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-[#00F2FF]" 
                  style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 20px rgba(0, 242, 255, 0.6);">
                PROYECTO:<br>
                <span class="text-[#FF00E5]" style="text-shadow: 0 0 20px rgba(255, 0, 229, 0.6);">PERROS Y GATOS</span>
              </h2>
              <p class="project-description text-[#F5F5F5] leading-relaxed mb-6 max-w-md" 
                 style="font-family: 'Inter', sans-serif;">
                E-commerce especializado en comida para mascotas con sistema de suscripciones y experiencia optimizada
              </p>
              <button class="view-project-btn group relative inline-flex items-center justify-center px-8 py-4 font-vcr font-bold text-sm md:text-base bg-gradient-to-r from-[#FF00E5] to-[#9D4EDD] text-white rounded-lg transition-all duration-300 hover:shadow-[0_0_30px_rgba(255,0,229,0.6)] transform hover:scale-105">
                <span class="relative z-10">VER PROYECTO</span>
                <div class="absolute inset-0 bg-gradient-to-r from-[#9D4EDD] to-[#FF00E5] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
            </div>
          </div>
          
          <div class="slide-image flex-1 w-full md:w-[65%]">
            <div class="image-container relative overflow-hidden">
              <img src="/images/perrosygatos.webp" 
                   alt="Perros y Gatos FOOD Project" 
                   class="project-image w-full h-auto aspect-video object-cover">
              <div class="vhs-scanlines absolute inset-0 pointer-events-none"></div>
            </div>
          </div>
        </div>

        <!-- Slide 4: Prof Nino P -->
        <div class="carousel-slide flex flex-col md:flex-row items-center gap-8 md:gap-12">
          <div class="slide-content flex-shrink-0 w-full md:w-[35%]">
            <div class="project-info">
              <h2 class="project-title text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-[#00F2FF]" 
                  style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 20px rgba(0, 242, 255, 0.6);">
                PROYECTO:<br>
                <span class="text-[#FF00E5]" style="text-shadow: 0 0 20px rgba(255, 0, 229, 0.6);">PROF NINO P</span>
              </h2>
              <p class="project-description text-[#F5F5F5] leading-relaxed mb-6 max-w-md" 
                 style="font-family: 'Inter', sans-serif;">
                Plataforma de entrenamiento personal con sistema de reservas y seguimiento de progreso personalizado
              </p>
              <button class="view-project-btn group relative inline-flex items-center justify-center px-8 py-4 font-vcr font-bold text-sm md:text-base bg-gradient-to-r from-[#FF00E5] to-[#9D4EDD] text-white rounded-lg transition-all duration-300 hover:shadow-[0_0_30px_rgba(255,0,229,0.6)] transform hover:scale-105">
                <span class="relative z-10">VER PROYECTO</span>
                <div class="absolute inset-0 bg-gradient-to-r from-[#9D4EDD] to-[#FF00E5] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
            </div>
          </div>
          
          <div class="slide-image flex-1 w-full md:w-[65%]">
            <div class="image-container relative overflow-hidden">
              <img src="/images/profninop.webp" 
                   alt="Prof Nino P Project" 
                   class="project-image w-full h-auto aspect-video object-cover">
              <div class="vhs-scanlines absolute inset-0 pointer-events-none"></div>
            </div>
          </div>
        </div>

        <!-- Slide 5: Terramarte -->
        <div class="carousel-slide flex flex-col md:flex-row items-center gap-8 md:gap-12">
          <div class="slide-content flex-shrink-0 w-full md:w-[35%]">
            <div class="project-info">
              <h2 class="project-title text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-[#00F2FF]" 
                  style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 20px rgba(0, 242, 255, 0.6);">
                PROYECTO:<br>
                <span class="text-[#FF00E5]" style="text-shadow: 0 0 20px rgba(255, 0, 229, 0.6);">TERRAMARTE</span>
              </h2>
              <p class="project-description text-[#F5F5F5] leading-relaxed mb-6 max-w-md" 
                 style="font-family: 'Inter', sans-serif;">
                Sitio web corporativo elegante con portfolio interactivo y sistema de contacto optimizado
              </p>
              <button class="view-project-btn group relative inline-flex items-center justify-center px-8 py-4 font-vcr font-bold text-sm md:text-base bg-gradient-to-r from-[#FF00E5] to-[#9D4EDD] text-white rounded-lg transition-all duration-300 hover:shadow-[0_0_30px_rgba(255,0,229,0.6)] transform hover:scale-105">
                <span class="relative z-10">VER PROYECTO</span>
                <div class="absolute inset-0 bg-gradient-to-r from-[#9D4EDD] to-[#FF00E5] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
            </div>
          </div>
          
          <div class="slide-image flex-1 w-full md:w-[65%]">
            <div class="image-container relative overflow-hidden">
              <img src="/images/terramarte.webp" 
                   alt="Terramarte Project" 
                   class="project-image w-full h-auto aspect-video object-cover">
              <div class="vhs-scanlines absolute inset-0 pointer-events-none"></div>
            </div>
          </div>
        </div>

        <!-- Slide 6: Ameba Producciones -->
        <div class="carousel-slide flex flex-col md:flex-row items-center gap-8 md:gap-12">
          <div class="slide-content flex-shrink-0 w-full md:w-[35%]">
            <div class="project-info">
              <h2 class="project-title text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-[#00F2FF]" 
                  style="font-family: 'Monument Extended', sans-serif; text-shadow: 0 0 20px rgba(0, 242, 255, 0.6);">
                PROYECTO:<br>
                <span class="text-[#FF00E5]" style="text-shadow: 0 0 20px rgba(255, 0, 229, 0.6);">AMEBA PRODUCCIONES</span>
              </h2>
              <p class="project-description text-[#F5F5F5] leading-relaxed mb-6 max-w-md" 
                 style="font-family: 'Inter', sans-serif;">
                E-commerce creativo con experiencia multimedia inmersiva y sistema de ventas optimizado
              </p>
              <button class="view-project-btn group relative inline-flex items-center justify-center px-8 py-4 font-vcr font-bold text-sm md:text-base bg-gradient-to-r from-[#FF00E5] to-[#9D4EDD] text-white rounded-lg transition-all duration-300 hover:shadow-[0_0_30px_rgba(255,0,229,0.6)] transform hover:scale-105">
                <span class="relative z-10">VER PROYECTO</span>
                <div class="absolute inset-0 bg-gradient-to-r from-[#9D4EDD] to-[#FF00E5] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
            </div>
          </div>
          
          <div class="slide-image flex-1 w-full md:w-[65%]">
            <div class="image-container relative overflow-hidden">
              <img src="/images/amebaproducciones.webp" 
                   alt="Ameba Producciones Project" 
                   class="project-image w-full h-auto aspect-video object-cover">
              <div class="vhs-scanlines absolute inset-0 pointer-events-none"></div>
            </div>
          </div>
        </div>

      </div>

      <!-- Carousel Indicators -->
      <div class="carousel-indicators absolute bottom-0 left-1/2 transform -translate-x-1/2 flex space-x-3 z-20">
        <button class="indicator active w-3 h-3 rounded-full bg-[#00F2FF] opacity-100 transition-all duration-300" data-slide="0"></button>
        <button class="indicator w-3 h-3 rounded-full bg-[#F5F5F5] opacity-30 transition-all duration-300 hover:opacity-60" data-slide="1"></button>
        <button class="indicator w-3 h-3 rounded-full bg-[#F5F5F5] opacity-30 transition-all duration-300 hover:opacity-60" data-slide="2"></button>
        <button class="indicator w-3 h-3 rounded-full bg-[#F5F5F5] opacity-30 transition-all duration-300 hover:opacity-60" data-slide="3"></button>
        <button class="indicator w-3 h-3 rounded-full bg-[#F5F5F5] opacity-30 transition-all duration-300 hover:opacity-60" data-slide="4"></button>
        <button class="indicator w-3 h-3 rounded-full bg-[#F5F5F5] opacity-30 transition-all duration-300 hover:opacity-60" data-slide="5"></button>
      </div>
    </div>
  </div>
</section>

<style>
  /* Outrun Grid Background Pattern */
  .grid-outrun-container {
    overflow: hidden;
    height: 100vh;
    position: relative;
  }

  .grid-outrun {
    position: absolute;
    bottom: -30%;
    left: 0;
    margin-left: -50%;
    width: 200%;
    height: 120%;
    background-image: 
        repeating-linear-gradient(
            90deg, 
            #FF00E5 0%, 
            transparent 2px, 
            transparent 25px, 
            #FF00E5 27px
        ),
        repeating-linear-gradient(
            0deg, 
            #FF00E5 0%, 
            transparent 2px, 
            transparent 25px, 
            #FF00E5 27px
        );
    transform: perspective(50vh) rotateX(60deg) translateZ(10px);
    z-index: 1;
    filter: drop-shadow(0 0 8px rgba(255, 0, 229, 0.6));
    mask: linear-gradient(to top, 
        rgba(0,0,0,1) 0%, 
        rgba(0,0,0,1) 40%, 
        rgba(0,0,0,0.6) 55%, 
        rgba(0,0,0,0) 70%
    );
    -webkit-mask: linear-gradient(to top, 
        rgba(0,0,0,1) 0%, 
        rgba(0,0,0,1) 40%, 
        rgba(0,0,0,0.6) 55%, 
        rgba(0,0,0,0) 70%
    );
    opacity: 0.7;
  }

  /* Carousel Styles */
  .portfolio-carousel {
    position: relative;
  }

  .carousel-slides {
    position: relative;
    height: 100%;
  }

  .carousel-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transform: translateX(100%);
    transition: none; /* Disable CSS transition - using JS animation instead */
  }

  .carousel-slide.active {
    opacity: 1;
    transform: translateX(0);
  }

  .carousel-slide.slide-out-left {
    opacity: 0;
    transform: translateX(-100%);
  }

  .carousel-slide.slide-out-right {
    opacity: 0;
    transform: translateX(100%);
  }

  .carousel-slide.slide-in-left {
    opacity: 1;
    transform: translateX(0);
  }

  .carousel-slide.slide-in-right {
    opacity: 1;
    transform: translateX(0);
  }

  /* VHS Scanlines Effect */
  .vhs-scanlines::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent 0px,
      transparent 2px,
      rgba(255, 255, 255, 0.05) 2px,
      rgba(255, 255, 255, 0.05) 4px,
      transparent 4px,
      transparent 6px
    );
    pointer-events: none;
    animation: scanlines 0.1s linear infinite;
  }

  .vhs-scanlines::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(0, 242, 255, 0.03) 25%,
      rgba(255, 0, 229, 0.03) 50%,
      rgba(157, 78, 221, 0.03) 75%,
      transparent 100%
    );
    pointer-events: none;
    animation: vhsGlow 3s ease-in-out infinite alternate;
  }

  @keyframes scanlines {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(4px);
    }
  }

  @keyframes vhsGlow {
    0% {
      opacity: 0.3;
    }
    100% {
      opacity: 0.6;
    }
  }

  /* Navigation Arrows */
  .carousel-nav {
    background: rgba(13, 11, 26, 0.8);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(0, 242, 255, 0.3);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }

  .carousel-nav:hover {
    border-color: rgba(255, 0, 229, 0.6);
    box-shadow: 0 0 20px rgba(0, 242, 255, 0.4);
    background: rgba(13, 11, 26, 0.9);
  }

  /* Mobile positioning for navigation arrows */
  @media (max-width: 1024px) {
    .carousel-prev {
      left: -10px !important;
    }
    
    .carousel-next {
      right: -10px !important;
    }
  }

  @media (max-width: 768px) {
    .carousel-prev {
      left: 10px !important;
    }
    
    .carousel-next {
      right: 10px !important;
    }
    
    .carousel-nav {
      width: 50px;
      height: 50px;
    }
  }

  /* Indicators */
  .indicator.active {
    background: linear-gradient(45deg, #00F2FF, #FF00E5) !important;
    box-shadow: 0 0 10px rgba(0, 242, 255, 0.6);
  }

  /* Button Glow Effect */
  .view-project-btn {
    position: relative;
    overflow: hidden;
  }

  .view-project-btn::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #FF00E5, #9D4EDD, #00F2FF, #FF00E5);
    border-radius: 8px;
    opacity: 0;
    z-index: -1;
    transition: opacity 0.3s ease;
    background-size: 400%;
    animation: gradientShift 3s ease infinite;
  }

  .view-project-btn:hover::before {
    opacity: 0.7;
  }

  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .carousel-slide {
      padding: 1rem 0;
    }
    
    .project-title {
      font-size: 1.75rem !important;
      line-height: 1.2;
    }
    
    .carousel-nav {
      width: 50px;
      height: 50px;
    }
    
    .view-project-btn {
      width: 100%;
      justify-content: center;
    }
  }
</style>

<script>
  console.log('🔧 Portfolio.astro script cargado');
  
  // Carousel functionality
  let currentSlide = 0;
  const slides = document.querySelectorAll('.carousel-slide');
  const indicators = document.querySelectorAll('.indicator');
  const prevBtn = document.querySelector('.carousel-prev');
  const nextBtn = document.querySelector('.carousel-next');
  
  console.log(`📊 Portfolio: ${slides.length} slides encontradas`);

function updateSlide(newIndex, direction = 'next') {
    if (newIndex === currentSlide) return;

    const currentSlideElement = slides[currentSlide];
    const newSlideElement = slides[newIndex];

    console.log(`🎯 Portfolio: Animando de ${currentSlide} a ${newIndex} (${direction})`);

    // 1. Preparar el nuevo slide (posicionarlo fuera de la pantalla)
    if (direction === 'next') {
        // El nuevo slide empieza a la derecha
        newSlideElement.style.transform = 'translateX(100%)';
    } else { // direction === 'prev'
        // El nuevo slide empieza a la izquierda
        newSlideElement.style.transform = 'translateX(-100%)';
    }
    
    // Hacerlo visible pero aún fuera de la pantalla
    newSlideElement.style.opacity = '1';
    newSlideElement.classList.add('active'); // Añadimos active para que se vea
    
    // Forzar al navegador a aplicar el estado inicial
    newSlideElement.offsetHeight; 

    // 2. Animar ambos slides
    requestAnimationFrame(() => {
        // Habilitar transiciones para la animación
        currentSlideElement.style.transition = 'transform 0.4s ease, opacity 0.4s ease';
        newSlideElement.style.transition = 'transform 0.4s ease, opacity 0.4s ease';

        if (direction === 'next') {
            // El slide actual se va a la izquierda
            currentSlideElement.style.transform = 'translateX(-100%)';
            currentSlideElement.style.opacity = '0';
            // El nuevo slide entra al centro
            newSlideElement.style.transform = 'translateX(0)';
        } else { // direction === 'prev'
            // El slide actual se va a la derecha
            currentSlideElement.style.transform = 'translateX(100%)';
            currentSlideElement.style.opacity = '0';
            // El nuevo slide entra al centro
            newSlideElement.style.transform = 'translateX(0)';
        }
    });

    // 3. Limpieza y actualización de estado
    // Quitar la clase 'active' del slide viejo
    currentSlideElement.classList.remove('active');

    // Actualizar los indicadores
    indicators[currentSlide].classList.remove('active');
    indicators[currentSlide].style.background = '#F5F5F5';
    indicators[currentSlide].style.opacity = '0.3';
    indicators[newIndex].classList.add('active');
    
    // Actualizar el índice del slide actual
    currentSlide = newIndex;

    // Después de la animación, quitar los estilos en línea para que las clases CSS controlen el estado
    setTimeout(() => {
        slides.forEach(slide => {
            slide.style.transition = '';
            // No reseteamos el transform ni la opacidad para evitar "saltos" de los slides inactivos
        });
        console.log(`✅ Animación completada para el slide ${currentSlide + 1}`);
    }, 400); // Coincidir con la duración de la transición
}

  function nextSlide() {
    const newIndex = (currentSlide + 1) % slides.length;
    updateSlide(newIndex, 'next');
  }

  function prevSlide() {
    const newIndex = (currentSlide - 1 + slides.length) % slides.length;
    updateSlide(newIndex, 'prev');
  }

  // Event listeners
  if (nextBtn) {
    nextBtn.addEventListener('click', nextSlide);
  }
  
  if (prevBtn) {
    prevBtn.addEventListener('click', prevSlide);
  }

  // Indicator clicks
  indicators.forEach((indicator, index) => {
    indicator.addEventListener('click', () => {
      const direction = index > currentSlide ? 'next' : 'prev';
      updateSlide(index, direction);
    });
  });

  // Auto-advance carousel (optional - remove if not wanted)
  let autoAdvance = setInterval(nextSlide, 8000);
  
  // Pause auto-advance on hover
  const carouselContainer = document.querySelector('.portfolio-carousel');
  if (carouselContainer) {
    carouselContainer.addEventListener('mouseenter', () => {
      clearInterval(autoAdvance);
    });
    
    carouselContainer.addEventListener('mouseleave', () => {
      autoAdvance = setInterval(nextSlide, 8000);
    });
  }

  // GSAP Animations
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof gsap !== 'undefined' && gsap.registerPlugin) {
      gsap.registerPlugin(ScrollTrigger);
      console.log('🎬 GSAP y ScrollTrigger inicializados para Portfolio');

      // Animate carousel entrance
      gsap.fromTo(".portfolio-carousel", {
        opacity: 0,
        y: 50
      }, {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: "power2.out",
        scrollTrigger: {
          trigger: "#portfolio",
          start: "top 70%",
          toggleActions: "play none none reverse"
        }
      });

      // Animate background elements
      gsap.to(".ambient-light-1", {
        scale: 1.2,
        duration: 4,
        yoyo: true,
        repeat: -1,
        ease: "power1.inOut"
      });

      gsap.to(".ambient-light-2", {
        scale: 0.8,
        duration: 3,
        yoyo: true,
        repeat: -1,
        ease: "power1.inOut",
        delay: 1
      });

      console.log('✨ Animaciones GSAP de Portfolio configuradas');
    } else {
      console.warn('⚠️ GSAP no está disponible para Portfolio');
    }
  });

  console.log('✅ Configuración de Portfolio completada');
</script>